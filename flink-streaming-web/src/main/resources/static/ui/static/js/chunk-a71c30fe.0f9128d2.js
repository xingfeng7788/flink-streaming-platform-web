(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a71c30fe"],{"72db":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[0==e.subPageFlag?r("div",{class:e.backFlag?"fl-container2":"fl-container"},[1==e.backFlag?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"返回",placement:"right"}},[r("i",{ref:"backbutton",staticClass:"el-icon-d-arrow-left fl-back",on:{click:function(t){return e.handleBack()}}})]):e._e(),r("el-form",{ref:"queryform",attrs:{model:e.queryform,inline:!0}},[r("el-form-item",[r("el-input",{staticClass:"wl-input",attrs:{placeholder:"集群名称"},on:{input:function(t){return e.handleQuery()}},model:{value:e.queryform.clusterName,callback:function(t){e.$set(e.queryform,"clusterName",t)},expression:"queryform.clusterName"}})],1),r("el-form-item",[r("el-input",{staticClass:"wl-input",attrs:{placeholder:"IP"},on:{input:function(t){return e.handleQuery()}},model:{value:e.queryform.clusterMasterIp,callback:function(t){e.$set(e.queryform,"clusterMasterIp",t)},expression:"queryform.clusterMasterIp"}})],1),r("el-form-item",[r("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:function(t){return e.handleQuery()}}},[e._v("查询")]),r("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1)],1),r("el-table",{staticClass:"wl-table",attrs:{data:e.list,"header-cell-style":{background:"#f4f4f5","text-align":"center"},border:""}},[r("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,label:"编号","min-width":"60",width:"80",align:"center",fixed:""}}),r("el-table-column",{attrs:{prop:"clusterName","show-overflow-tooltip":!0,label:"集群名称","min-width":"100",align:"center",fixed:""}}),r("el-table-column",{attrs:{prop:"clusterMasterIp","show-overflow-tooltip":!0,label:"主节点IP",width:"130",align:"center"}}),r("el-table-column",{attrs:{prop:"yarnRmPort","show-overflow-tooltip":!0,label:"yarnRM端口",width:"105",align:"center"}}),r("el-table-column",{attrs:{prop:"flinkHttpPort","show-overflow-tooltip":!0,label:"flinnkHttp端口",width:"105",align:"center"}}),r("el-table-column",{attrs:{prop:"flinkUiPort","show-overflow-tooltip":!0,label:"flinkUI端口",width:"105",align:"center"}}),r("el-table-column",{attrs:{prop:"flinkHaHttpPort","show-overflow-tooltip":!0,label:"flinkHA服务端口",width:"105",align:"center"}}),r("el-table-column",{attrs:{prop:"clusterStatus","show-overflow-tooltip":!0,label:"集群状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.clusterStatus?r("el-tag",{attrs:{type:"success"}},[e._v("运行中")]):r("el-tag",{attrs:{type:"danger"}},[e._v("停止")])]}}],null,!1,2784046233)}),r("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":!0,label:"集群备注","min-width":"100"}}),r("el-table-column",{attrs:{prop:"operate",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{name:"UpdateClusterCfg",params:{flag:"update",context:e.queryContent(),data:t.row}}}},[r("el-link",{attrs:{type:"primary",icon:"el-icon-edit-outline"}},[e._v("修改")])],1),r("el-link",{attrs:{type:"danger",icon:"el-icon-delete"},nativeOn:{click:function(r){return e.deleteCluster(t.row)}}},[e._v("删除")])]}}],null,!1,2210701494)})],1),e.pageshow?r("el-pagination",{staticClass:"wl-pagination",attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":e.currentPage,"page-sizes":[10,15,20,50,100,150,200],"page-size":e.pageSize,total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1):e._e(),r("router-view")],1)},n=[],l=(r("b0c0"),r("ac1f"),r("5319"),r("498a"),r("7ea2")),o={name:"ClusterCfg",data:function(){return{loading:!1,subPageFlag:!1,backFlag:!1,params:{flag:"",data:{},context:""},queryform:{clusterName:"",clusterMasterIp:""},list:[],count:0,pageSize:15,currentPage:1,pageshow:!0}},mounted:function(){if("ClusterCfg"===this.$route.name){this.subPageFlag=!1;var e=this.$route.params;e&&(this.queryform.clusterName=e.clusterName?e.clusterName:"",this.queryform.clusterMasterIp=e.clusterMasterIp?e.clusterMasterIp:"",e.currentPage&&(this.count=e.count,this.currentPage=e.currentPage,this.pageSize=e.pageSize)),this.handleQuery()}else this.subPageFlag=!0},methods:{handleBack:function(){this.$router.go(-1)},queryContent:function(){return{count:this.count,currentPage:this.currentPage,pageSize:this.pageSize,clusterName:this.queryform.clusterName,clusterMasterIp:this.queryform.clusterMasterIp}},handleQuery:function(e){var t=this;this.pageshow=!1,this.getCluster(),this.$nextTick((function(){t.pageshow=!0}))},handleSizeChange:function(e){this.pageSize=e,this.handleQuery()},handleCurrentChange:function(e){this.currentPage=e,this.handleQuery()},getCluster:function(){var e=this;this.loading=!0;var t=this.queryform.clusterName?this.queryform.clusterName.trim():"",r=this.queryform.clusterMasterIp?this.queryform.clusterMasterIp.trim():"";Object(l["b"])(this.currentPage,this.pageSize,t,r).then((function(t){e.loading=!1;var r=t.code,a=t.success,n=t.message,l=t.data;"200"===r&&a?(e.list=l.data,e.count=l.total,e.count>0&&0==e.list.length&&(e.currentPage=Math.ceil(e.count/e.pageSize),e.getCluster())):e.$message({type:"error",message:n||"请求数据异常！"})})).catch((function(t){e.loading=!1,e.$message({type:"error",message:"请求异常！"}),console.log(t)}))},deleteCluster:function(e){var t=this,r=e.id,a=e.clusterName;this.$confirm("确定要删除[".concat(a,"]吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(l["c"])(r).then((function(e){t.loading=!1;var r=e.code,n=e.success,l=e.message;e.data;"200"===r&&n?(t.handleQuery(),t.$message({type:"success",message:"删除[".concat(a,"]成功！")})):t.$message({type:"error",message:l||"请求数据异常！"})})).catch((function(e){t.loading=!1,t.$message({type:"error",message:"请求异常！"}),console.log(e)}))}))},handleAdd:function(){this.$router.replace({name:"CreateClusterCfg",params:{flag:"create",context:this.queryContent(),data:{}}})}}},s=o,i=(r("76c3"),r("2877")),u=Object(i["a"])(s,a,n,!1,null,"0a393907",null);t["default"]=u.exports},"76c3":function(e,t,r){"use strict";r("76cd")},"76cd":function(e,t,r){},"7ea2":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return u}));var a=r("b775"),n=r("4328"),l=r.n(n);function o(e,t,r,n){return Object(a["a"])({url:"/listCluster",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return l.a.stringify(e)}],data:{pageNum:e,pageSize:t,clusterName:r,clusterMasterIp:n}})}function s(e){return Object(a["a"])({url:"/delCluster",method:"get",params:{id:e}})}function i(e){return Object(a["a"])({url:"/addCluster",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return l.a.stringify(e)}],data:e})}function u(e){return Object(a["a"])({url:"/editCluster",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return l.a.stringify(e)}],data:e})}}}]);